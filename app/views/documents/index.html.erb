
<div class="row">
  <div class="col-4">
    <div class="scrollable-container">
      <div>
        <%= form_tag project_documents_path, class: "", method: :get do %>
        <%= text_field_tag :query,
        params[:query],
        class: "form mr-2 ",
          placeholder: "Search the table you prefer"
          %>
          <%= submit_tag "Search", class: "search-button" %>
          <% end %>
        </div>

        <ul>
          <% @documents.each do |document| %>
          <li> <%= link_to "#{document.link.url}", project_documents_path(document_id: document.id) %> </li>
          <% end %>
        </ul>
      </div>

      <div class="col-8">

        <div>
          <h1>Put a file</h1>
          <%= simple_form_for(Document.new, :url => { :action => "create" }, input_html: { id: "my_form"})  do |f| %>
          <%= f.input :link, input_html: { class: 'dropzone' } %>
          <%= f.submit %>
          <% end %>

        </div>
        <% if params[:document_id].present?  %>


        <%= link_to "bar", charts_preview_path(document_id: params[:document_id], chart_type: "bar") %>
        <%= link_to "line", charts_preview_path(document_id: params[:document_id], chart_type: "line") %>
        <%= link_to "doughnut", charts_preview_path(document_id: params[:document_id], chart_type: "doughnut") %>

        <table class="table" data-controller="table">
          <thead class="thead-dark">
            <tr>
              <% @headers.each_with_index do |element, index| %>
              <td id="header"
              class="<%= element %>"
              data-column-id="<%= index %>"
              data-action="click->table#toggle">
              <%= element %>
            </td>
            <% end %>
          </tr>
        </thead>

        <tbody>
          <% @arrayofhash.each do |row| %>
          <tr>
            <% row.each_with_index do |hash, index| %>
            <td class="<%= hash.first %> "
              data-column-id="<%= index %>"
              data-target="table.cell">
              <%= hash.last %>
            </td>
            <% end %>
          </tr>
          <% end %>

        </tbody>
      </table>

      <% end %>
    </div>
  </div>
</div>



<%= form_tag '/project_documents_path', method: :post, class: "dropzone", id: "media-dropzone" do %>
  <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>" />
  <div class="fallback">
    <%= file_field_tag "media", multiple: true%>
  </div>
<% end %>
